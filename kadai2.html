<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>オセロ</title>
</head>

<body>
<h1>オセロ</h1>
<p><span id="turn_check"></span></p>
<p><span id="black_score"></span></p>
<p><span id="white_score"></span></p>
<canvas id="canvas"></canvas>
<script>
  let canvas = document.getElementById('canvas');
  let ctx = canvas.getContext('2d');

  canvas.width = 600;
	canvas.height = 600;

  let w = 480, h = 480;
	let x0 = 60, y0 = 60;
  ctx.strokeRect(x0,y0,w,h);

  ctx.beginPath();
  //縦線の描写
  for(let i = 1; i < 8 ; i++){
    ctx.moveTo(60*(i+1), 60);
  	ctx.lineTo(60*(i+1), 540);
  }
  //横線の描写
  for(let i = 1; i < 8 ; i++){
    ctx.moveTo(60, 60*(i+1) );
  	ctx.lineTo(540, 60*(i+1) );
  }
	ctx.stroke();

  //最初のコマの描写
  ctx.beginPath();
  ctx.arc(270, 270, 25, 0, 2 * Math.PI, false);
  ctx.fill();
  ctx.beginPath();
  ctx.arc(330, 330, 25, 0, 2 * Math.PI, false);
  ctx.fill();
  ctx.beginPath();
  ctx.arc(270, 330, 25, 0, 2 * Math.PI, false);
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(330, 270, 25, 0, 2 * Math.PI, false);
  ctx.stroke();

  //座標の設定
  let game = new Array();
    for(i=0; i<8; i++){
      game[i] = new Array(0,0,0,0,0,0,0,0);
    }
		/*座標の状態
			0:初期状態
			1:黒のコマ
			-1:白のコマ
			3:黒が置けるマス
			-3:白が置けるマス
			9:白と黒が置けるマス*/

	//ターンの管理
		//nowturn:1で黒,-1で白のターン
	let nowturn = 1;
	function turn_check(nowturn){
		let wint = document.getElementById("turn_check");
		let turnb = 0;
		let turnw = 0;
			for(i=0;i<8 && turngo = 0;i++){
				for(l=0;l<8 && turngo = 0;l++){
					if(game[i][l]=3 || game[i][l]=9){
						turnb=1;
					}
				}
			}
			for(i=0;i<8 && turngo = 0;i++){
				for(l=0;l<8 && turngo = 0;l++){
					if(game[i][l]=-3 || game[i][l]=9){
						turnw=1;
					}
				}
			}
		switch (turnb+turnw) {
			case 2:	if(nowturn = 1){
				nowturn = -1;
				wint.innerHTML="現在のターン：白";
			}else{
				nowturn = 1;
				wint.innerHTML="現在のターン：黒";
			}
				break;
			case 1:if(turnb = 1){
				nowturn = 1;
				wint.innerHTML="現在のターン：黒";
			}else {
				nowturn = -1;
				wint.innerHTML="現在のターン：白";
			}
			default:0
				nowturn = 0;
				gameend = 0;
				wint.innerHTML="ゲームは終了しました";
		}
	}

  //最初のコマを格納
  game[3][3]=1;
  game[4][4]=1;
  game[3][4]=-1;
  game[4][3]=-1;

	//ゲームの終了
	let gameend = 0;

  //黒いコマを配置する関数
  function black_koma(x,y){
  ctx.beginPath();
  ctx.arc(x, y, 25, 0, 2 * Math.PI, false);
  ctx.fill();
  game[(x-30)/60][(y-30)/60]=1;
  }
  //白いコマを配置する関数
  function white_koma(x,y){
		console.log(x);
		console.log(y);
  ctx.beginPath();
  ctx.arc(x, y, 25, 0, 2 * Math.PI, false);
  ctx.stroke();
  game[(x-30)/60][(y-30)/60]=-1;
  }

  //カーソルの内部座標を返す関数
  function boardxy(x,y){
      const xx = x-x%60+30;
      const yy = y-y%60+30;
    return [xx,yy];
  }

  //クリックイベント
  function onClick(e) {
    let rect = e.target.getBoundingClientRect();
    x = e.clientX - rect.left;
    y = e.clientY - rect.top;

  let board = boardxy(x,y);
  x = board[0];
  y = board[1];

  }

  canvas.addEventListener('click', onClick, false);

</script>
</body>
</html>
